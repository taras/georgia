name: TNP Pull Requests

on:
  pull_request:
    branches:
    - release-*

jobs:
  # tests:
  #   name: Run Tests
  #   runs-on: ubuntu-latest
  #   steps:
  #   - uses: actions/checkout@master
  #   - name: yarn
  #     run: yarn
  #   - name: test
  #     run: yarn test
    # - name: lint
    #   run: yarn lint
    # - name: coverage
    #   run: |
    #     yarn coverage
    #     yarn coveralls

  publish:
    name: publish commit package
    runs-on: ubuntu-latest
    #needs: tests
    steps:
    - uses: actions/checkout@master
    # - uses: frontside/create-commit-package
      # - name: Publish
      #   #uses: actions/npm@master
      #   uses: frontside/beta-publish
      #   with:
          # args: version "`node -e \"console.log(require('./package.json').version)\"`-`git log --pretty=format:'%h' -n 1 --skip 1`" --no-git-tag-version && 
    # - uses: actions/npm
    #   args: [publish --access=public]
    - name: Git Tester
      uses: taras/georgia/.github/actions/Packager@features


  ## ~~~~~~~~~~~~~~ local
  # danger: 
  #   name: Danger JS
  #   runs-on: ubuntu-latest
  #   needs: publish
  #   steps:
  #   - uses: actions/checkout@master
  #   - name: Danger
  #     run: |
  #       cd .github
  #       yarn global add danger --dev
  #       export PATH="$(yarn global bin):$PATH"
  #       danger ci
  #     env: 
  #       GITHUB_TOKEN: ${{ secrets.DANGER_GITHUB }} # our own bot
  #       #GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }} # github action bot

  ## conclusion: instruct people to put the dangerfile in the github folder. tried making it dynamic. don't work.


  ## ~~~~~~~~~~~~~~ from repo
  # danger:
  #   name: Danger JS
  #   needs: publish
  #   runs-on: ubuntu-latest
  #   steps:
  #   - uses: actions/checkout@master
  #   - name: Danger
  #     uses: taras/georgia/.github/actions/Danger@features
  #     env:
  #       GITHUB_TOKEN: ${{ secrets.DANGER_GITHUB }}


  ## ~~~~~~~~~~~~~~ from source
  # danger:
  #   name: Danger JS
  #   runs-on: ubuntu-latest
  #   #needs: publish
  #   steps:
  #   - uses: actions/checkout@master
  #   - name: Danger
  #     uses: danger/danger-js@master
  #     #uses: taras/georgia/.github/actions/Danger@features
  #     env: 
  #       #TEST: "--dangerfile ./.github/"
  #       GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}